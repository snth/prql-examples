# prql-exec/duckdb

## Getting started

### Install DuckDB

See https://duckdb.org/docs/installation/

### Install the `httpfs` extension

```sh
duckdb -c 'INSTALL httpfs;'
```

## Example usage

### Download some Google Stock data to work with

```sh
mkdir _data
wget https://vincentarelbundock.github.io/Rdatasets/csv/causaldata/google_stock.csv -O _data/google_stock.csv
```

### Query the Google stock data

```sh
❯ prql-exec 'import duckdb\nfrom `_data/google_stock.csv`'
┌──────────┬────────────┬─────────────────────────┬─────────────────────────┐
│ rownames │    Date    │      Google_Return      │      SP500_Return       │
│  int64   │    date    │         double          │         double          │
├──────────┼────────────┼─────────────────────────┼─────────────────────────┤
│        1 │ 2015-05-04 │    0.005354164103922754 │   0.0029407719051932624 │
│        2 │ 2015-05-05 │   -0.018454899339487296 │   -0.011837369767650707 │
│        3 │ 2015-05-06 │   -0.012396415125766724 │  -0.0044556966871822645 │
│        4 │ 2015-05-07 │    0.012361301282815873 │   0.0037737663149290945 │
│        5 │ 2015-05-08 │     0.01416988662137042 │     0.01345785440613012 │
│        6 │ 2015-05-11 │   -0.004682024331646328 │   -0.005089551533481451 │
│        7 │ 2015-05-12 │    -0.01243239471870683 │   -0.002949656348410934 │
│        8 │ 2015-05-13 │    0.001096357598895814 │ -0.00030488966805131135 │
│        9 │ 2015-05-14 │     0.01657797870716715 │    0.010779230681254859 │
│       10 │ 2015-05-15 │   -0.008451054600993269 │   0.0007684691905143204 │
│       11 │ 2015-05-18 │  -0.0029034149474232995 │    0.003047961822747025 │
│       12 │ 2015-05-19 │      0.0095059122939527 │  -0.0006434341536727395 │
│       13 │ 2015-05-20 │   0.0035544794054584994 │  -0.0009305254649102368 │
│       14 │ 2015-05-21 │    0.006008103324564473 │    0.002337888374062347 │
│       15 │ 2015-05-22 │   -0.004423927587990373 │  -0.0022338817919862475 │
│       16 │ 2015-05-26 │   -0.014422947577982681 │    -0.01028192995494015 │
│       17 │ 2015-05-27 │     0.01403285787077313 │     0.00916262712669913 │
│       18 │ 2015-05-28 │ -1.8431242530425607e-05 │  -0.0012667884792887385 │
│       19 │ 2015-05-29 │   -0.014209573507581452 │   -0.006318400218786491 │
│       20 │ 2015-06-01 │   0.0035331135535823233 │   0.0020594194714789182 │
│        · │     ·      │             ·           │             ·           │
│        · │     ·      │             ·           │             ·           │
│        · │     ·      │             ·           │             ·           │
│       65 │ 2015-08-04 │  -0.0031051820023224597 │  -0.0022497187851517886 │
│       66 │ 2015-08-05 │    0.023091027413587595 │    0.003114669520188018 │
│       67 │ 2015-08-06 │   -0.001708714080038698 │   -0.007752971654983343 │
│       68 │ 2015-08-07 │   -0.011483172154699406 │  -0.0028748872122712488 │
│       69 │ 2015-08-10 │     -0.0024712860532905 │    0.012808232694927035 │
│       70 │ 2015-08-11 │     0.04268387144947772 │   -0.009557167162504987 │
│       71 │ 2015-08-12 │  -0.0018463496874238094 │   0.0009500640573494312 │
│       72 │ 2015-08-13 │   -0.004715243509961775 │  -0.0012751372210638712 │
│       73 │ 2015-08-14 │   0.0010206154128304945 │   0.0039118935964941315 │
│       74 │ 2015-08-17 │   0.0057067202771694525 │    0.005211470973541132 │
│       75 │ 2015-08-18 │   -0.007172348625087754 │  -0.0026255208234241545 │
│       76 │ 2015-08-19 │    0.007269929684133425 │   -0.008254964424012301 │
│       77 │ 2015-08-20 │    -0.02128916097603295 │   -0.021100110116800797 │
│       78 │ 2015-08-21 │   -0.053105199352552646 │   -0.031850982202944356 │
│       79 │ 2015-08-24 │   -0.037339987831112254 │    -0.03941366590728046 │
│       80 │ 2015-08-25 │   -0.012805052818093188 │   -0.013522007595565322 │
│       81 │ 2015-08-26 │     0.07999174854823132 │     0.03903384539598753 │
│       82 │ 2015-08-27 │    0.014301151842935012 │    0.024297736162143035 │
│       83 │ 2015-08-28 │   -0.011339188798933364 │   0.0006087560246721413 │
│       84 │ 2015-08-31 │   -0.019242369529154035 │   -0.008391699809439435 │
├──────────┴────────────┴─────────────────────────┴─────────────────────────┤
│ 84 rows (40 shown)                                              4 columns │
└───────────────────────────────────────────────────────────────────────────┘
```

